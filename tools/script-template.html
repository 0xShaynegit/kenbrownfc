    <script>
        const navbar        = document.getElementById('navbar');
        const navbarToggle  = document.getElementById('navbar-toggle');
        const mobileOverlay = document.getElementById('mobile-overlay');
        const mobileDrawer  = document.getElementById('mobile-drawer');
        const drawerClose   = document.getElementById('mobile-drawer-close');
        const servicesTrigger = document.getElementById('services-menu-trigger');
        const navHasMega    = document.querySelector('.nav-has-mega');

        // --- Navbar scroll effect ---
        window.addEventListener('scroll', () => {
            navbar.classList.toggle('scrolled', window.scrollY > 50);
        });

        // --- Mobile drawer ---
        function openDrawer() {
            mobileDrawer.classList.add('open');
            mobileOverlay.classList.add('open');
            mobileDrawer.setAttribute('aria-hidden', 'false');
            mobileOverlay.setAttribute('aria-hidden', 'false');
            navbarToggle.setAttribute('aria-expanded', 'true');
            navbarToggle.classList.add('active');
            document.body.style.overflow = 'hidden';
            mobileDrawer.focus();
        }

        function closeDrawer() {
            mobileDrawer.classList.remove('open');
            mobileOverlay.classList.remove('open');
            mobileDrawer.setAttribute('aria-hidden', 'true');
            mobileOverlay.setAttribute('aria-hidden', 'true');
            navbarToggle.setAttribute('aria-expanded', 'false');
            navbarToggle.classList.remove('active');
            document.body.style.overflow = '';
            navbarToggle.focus();
        }

        if (navbarToggle) {
            navbarToggle.addEventListener('click', () => {
                mobileDrawer.classList.contains('open') ? closeDrawer() : openDrawer();
            });
        }
        if (drawerClose)   drawerClose.addEventListener('click', closeDrawer);
        if (mobileOverlay) mobileOverlay.addEventListener('click', closeDrawer);

        // Close drawer on any link tap inside
        if (mobileDrawer) {
            mobileDrawer.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', closeDrawer);
            });
        }

        // Escape key closes both drawer and mega menu
        document.addEventListener('keydown', e => {
            if (e.key === 'Escape') {
                if (mobileDrawer && mobileDrawer.classList.contains('open')) closeDrawer();
                if (servicesTrigger) servicesTrigger.setAttribute('aria-expanded', 'false');
            }
        });

        // --- Desktop mega menu: ARIA state sync ---
        if (servicesTrigger && navHasMega) {
            navHasMega.addEventListener('mouseenter', () => {
                servicesTrigger.setAttribute('aria-expanded', 'true');
            });
            navHasMega.addEventListener('mouseleave', () => {
                servicesTrigger.setAttribute('aria-expanded', 'false');
            });
            navHasMega.addEventListener('focusin', () => {
                servicesTrigger.setAttribute('aria-expanded', 'true');
            });
            navHasMega.addEventListener('focusout', e => {
                if (!navHasMega.contains(e.relatedTarget)) {
                    servicesTrigger.setAttribute('aria-expanded', 'false');
                }
            });
        }

        // --- Smooth scroll for anchor links ---
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) target.scrollIntoView({ behavior: 'smooth' });
            });
        });
    </script>